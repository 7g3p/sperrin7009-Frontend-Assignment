{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\7G3P\\\\reactNodeProjects\\\\Frontend-Assignment\\\\reddit-saves-project\\\\src\\\\favourites.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PostList from './Components/postListings.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function storageAvailable(type) {\n  var storage;\n\n  try {\n    storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e instanceof DOMException && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === 'QuotaExceededError' || // Firefox\n    e.name === 'NS_ERROR_DOM_QUOTA_REACHED') && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\n\nString.prototype.replaceAt = function (index, replacement) {\n  return this.substr(0, index) + replacement + this.substr(index + replacement.length);\n};\n\nconst FavouritePosts = () => {\n  _s();\n\n  const defaultKeyName = \"FavPost\";\n  const [postList, setPostList] = useState([]);\n  useEffect(() => {\n    async function FetchFavouritePosts() {\n      let postUrls = null;\n      let postsArr = [];\n      let tempPostList = [];\n\n      if (storageAvailable('localStorage')) {\n        postUrls = localStorage.getItem(defaultKeyName);\n\n        if (postUrls !== null) {\n          postsArr = postUrls.split(\"}{\");\n\n          for (let i = 1; i < postsArr.length; i++) {\n            let query = \"\";\n            query = postsArr[i].replaceAt(postsArr[i].length - 1, \".json\");\n            fetch(query).then(res => {\n              res.json().then(resJSON => {\n                //console.log(resJSON[0].data.children[0]);\n                tempPostList = [...tempPostList, resJSON[0].data.children[0]];\n              });\n            }).catch(error => {\n              console.log(\"***ERROR: \" + error);\n            });\n          }\n\n          postList = tempPostList;\n          console.log(postList);\n        }\n      } else {\n        Window.alert(\"LocalStorage is not available.\");\n      }\n    }\n\n    FetchFavouritePosts();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(PostList, {\n      postList: postList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FavouritePosts, \"F3SI41Jj1uID6zyteUvbfaAJRps=\");\n\n_c = FavouritePosts;\nexport default FavouritePosts;\n\nvar _c;\n\n$RefreshReg$(_c, \"FavouritePosts\");","map":{"version":3,"sources":["C:/Users/7G3P/reactNodeProjects/Frontend-Assignment/reddit-saves-project/src/favourites.js"],"names":["React","useState","useEffect","PostList","storageAvailable","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","length","String","prototype","replaceAt","index","replacement","substr","FavouritePosts","defaultKeyName","postList","setPostList","FetchFavouritePosts","postUrls","postsArr","tempPostList","localStorage","getItem","split","i","query","fetch","then","res","json","resJSON","data","children","catch","error","console","log","Window","alert"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PostList from './Components/postListings.js';\r\n\r\nexport function storageAvailable(type) {\r\n    var storage;\r\n    try {\r\n        storage = window[type];\r\n        var x = '__storage_test__';\r\n        storage.setItem(x, x);\r\n        storage.removeItem(x);\r\n        return true;\r\n    }\r\n    catch(e) {\r\n        return e instanceof DOMException && (\r\n            // everything except Firefox\r\n            e.code === 22 ||\r\n            // Firefox\r\n            e.code === 1014 ||\r\n            // test name field too, because code might not be present\r\n            // everything except Firefox\r\n            e.name === 'QuotaExceededError' ||\r\n            // Firefox\r\n            e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n            // acknowledge QuotaExceededError only if there's something already stored\r\n            (storage && storage.length !== 0);\r\n    }\r\n}\r\n\r\nString.prototype.replaceAt = function(index, replacement) {\r\n    return this.substr(0, index) + replacement + this.substr(index + replacement.length);\r\n}\r\n\r\nconst FavouritePosts = () => {\r\n    const defaultKeyName = \"FavPost\";\r\n    const [postList, setPostList] = useState([]);\r\n\r\n    useEffect(() => {\r\n        async function FetchFavouritePosts() {\r\n            let postUrls = null;\r\n            let postsArr = [];\r\n            let tempPostList = []\r\n\r\n            if (storageAvailable('localStorage')) {\r\n                postUrls = localStorage.getItem(defaultKeyName);\r\n\r\n                if (postUrls !== null){\r\n                    postsArr = postUrls.split(\"}{\");\r\n\r\n                    for (let i = 1; i < postsArr.length;i++){\r\n                        let query = \"\";\r\n\r\n                        query = postsArr[i].replaceAt(postsArr[i].length - 1, \".json\");\r\n\r\n                        fetch(query)\r\n                        .then((res) => {\r\n                            res.json()\r\n                            .then((resJSON) => {\r\n                                //console.log(resJSON[0].data.children[0]);\r\n                                tempPostList = [...tempPostList, resJSON[0].data.children[0]];\r\n                            })\r\n                        })\r\n                        .catch((error) => {\r\n                            console.log(\"***ERROR: \" + error);\r\n                        })\r\n                    }\r\n\r\n                    postList = tempPostList;\r\n                    console.log(postList);\r\n                }\r\n        \r\n            }\r\n            else {\r\n                Window.alert(\"LocalStorage is not available.\");\r\n            }\r\n        }\r\n\r\n        FetchFavouritePosts();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <PostList \r\n            postList={postList}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FavouritePosts;"]},"metadata":{},"sourceType":"module"}